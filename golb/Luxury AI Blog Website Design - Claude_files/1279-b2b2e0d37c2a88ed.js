"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1279],{19170:function(e,n,i){i.d(n,{Ck:function(){return y},IR:function(){return m},MZ:function(){return C},PT:function(){return p},Pd:function(){return f},Uc:function(){return h},W1:function(){return u},_y:function(){return b},cc:function(){return E},fb:function(){return z},gq:function(){return S},k7:function(){return w},ml:function(){return g},wO:function(){return _},yU:function(){return v},yq:function(){return k}});var t=i(3053),o=i(5362),r=i(8571),a=i(29305),s=i(13262),l=i(58183),c=i(77930),d=i(81695);function u(e,n){return(0,o.WE)("/api/auth/login_methods?email=".concat(encodeURIComponent(e||""),"&source=").concat(n),{enabled:!!e&&(0,a.vV)(e),meta:{noToast:!0}})}let _=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,t.z$)(),i=(0,r.Zx)();return(0,o.uC)("/api/auth/send_magic_link","POST",{...e,onSuccess:(i,t,o)=>{i.sso_url?n({event_key:"login.email.sso_initiated"}):n({event_key:"login.email.magic_link_sent"}),e.onSuccess&&e.onSuccess(i,t,o)},onError:(i,t,o)=>{n({event_key:"login.email.magic_link_send_error",error:i.message}),e.onError&&e.onError(i,t,o)},onMutate:e=>{n({event_key:"login.email.sending_magic_link"})},transformVariables:e=>({...e,source:i?"claude":"console"})})},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,r.Zx)();return(0,o.uC)("/api/auth/exchange_nonce_for_code","POST",{...e,transformVariables:e=>({...e,source:n?"claude":"console"})})},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,t.z$)(),i=(0,r.Zx)(),a=(0,r.Hm)(),{client:s}=(0,l.useStatsigClient)();return(0,o.uC)("/api/auth/verify_magic_link","POST",{...e,onSuccess:(i,t,o)=>{"code"===t.credentials.method?n({event_key:"login.email.finished"}):n({event_key:"login.email.magic_link_success"}),x(s,i,n,"email","magic_link",a),e.onSuccess&&e.onSuccess(i,t,o)},onError:(i,t,o)=>{"code"===t.credentials.method?n({event_key:"login.email.code_verification_error",error:i.message}):n({event_key:"login.email.magic_link_verification_error",error:i.message}),e.onError&&e.onError(i,t,o)},onMutate:e=>{"code"===e.credentials.method?n({event_key:"login.email.verifying_code"}):n({event_key:"login.email.verifying_magic_link"})},transformVariables:e=>({...e,source:i?"claude":"console"})})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,t.z$)(),i=(0,r.Zx)(),a=(0,r.Hm)(),s=(0,d.useRouter)(),{client:c}=(0,l.useStatsigClient)();return(0,o.uC)("/api/auth/verify_google","POST",{...e,onSuccess:(i,t,o)=>{!i.success&&i.sso_url?(n({event_key:"login.email.sso_initiated"}),s.push(i.sso_url)):(n({event_key:"login.google.finished"}),x(c,i,n,"google","button",a),e.onSuccess&&e.onSuccess(i,t,o))},onError:(i,t,o)=>{n({event_key:"login.google.verification_error",error:i.message}),e.onError&&e.onError(i,t,o)},onMutate:e=>{n({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:i?"claude":"console"})})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,t.z$)(),i=(0,r.Zx)(),a=(0,r.Hm)(),s=(0,d.useRouter)(),{client:c}=(0,l.useStatsigClient)();return(0,o.uC)("/api/auth/verify_google_mobile","POST",{...e,onSuccess:(i,t,o)=>{!i.success&&i.sso_url?(n({event_key:"login.email.sso_initiated"}),s.push(i.sso_url)):(n({event_key:"login.google.finished"}),x(c,i,n,"google","onetap",a),e.onSuccess&&e.onSuccess(i,t,o))},onError:(i,t,o)=>{n({event_key:"login.google.verification_error",error:i.message}),e.onError&&e.onError(i,t,o)},onMutate:e=>{n({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:i?"claude":"console"})})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,t.z$)(),i=(0,r.Zx)(),a=(0,d.useRouter)();return(0,o.uC)("/api/auth/accept_invite","POST",{...e,onSuccess:(i,t,o)=>{!i.success&&i.sso_url?(n({event_key:"login.email.sso_initiated"}),a.push(i.sso_url)):e.onSuccess&&e.onSuccess(i,t,o)},transformVariables:e=>({...e,source:i?"claude":"console"})})},b=()=>(0,o.uC)("/api/auth/logout","POST"),h=()=>(0,o.uC)("/api/auth/logout/all-sessions","POST"),k=()=>{let e=(0,c.useQueryClient)();return(0,o.uC)("/api/account?statsig_hashing_algorithm=djb2","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[s.aY]})}})},y=()=>(0,o.Ne)("/api/account?statsig_hashing_algorithm=djb2","PUT",(e,n)=>(null==n?void 0:n.account)?{...n,account:{...n.account,settings:e}}:n,{queryKey:[s.aY],transformVariables:e=>({settings:e})}),w=()=>{let e=(0,c.useQueryClient)();return(0,o.uC)("/api/account/accept_legal_docs","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[s.aY]})}})};function x(e,n,i,t,o,r){n.created&&i({event_key:"login.account.created",surface:r,authMethod:t,flow:o},n.account)}function S(e){return(0,o.WE)("/api/signups/".concat(e),{enabled:!!e,staleTime:0})}function C(e){return(0,o.WE)("/api/enterprise_auth/idp_redirect_url?organization_id=".concat(e),{meta:{noToast:!0}})}function z(e,n,i){return(0,o.WE)("/api/enterprise_auth/sso_callback?code=".concat(e,"&state=").concat(n,"&source=").concat(i),{meta:{noToast:!0}})}function E(e,n){var i;let t=(0,c.useQueryClient)();return(0,o.uC)("/api/highside/login","GET",{...n,headers:{...null!==(i=n.headers)&&void 0!==i?i:{},...e},async onSuccess(){for(var e,i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];await t.invalidateQueries({queryKey:[s.aY]}),null===(e=n.onSuccess)||void 0===e||e.call(n,...o)}})}},80573:function(e,n,i){i.d(n,{$:function(){return o}});var t=i(87033);let o=()=>{let{value:e}=(0,t.FL)("claude_ai_segment_enabled");return e}},3053:function(e,n,i){i.d(n,{Ve:function(){return k},YZ:function(){return w},q$:function(){return x},z$:function(){return y}});var t=i(30947),o=i(6385),r=i(45439),a=i(87033),s=i(99586),l=i(7653),c=i(80573),d=i(5362),u=i(8571),_=i(50862),v=i(60705),g=i(27218),m=i(91447),p=i(25304);let f={snippets_command_used:{version:1},file_upload_too_large:{version:1},sse_interrupted:{version:1},snippets_suggestion_selected:{version:1},payment_modal_open:{version:1},pro_waitlist_requested:{version:1},payment_state_poll_for_invoice:{version:1},payment_state_poll_for_payment:{version:1},payment_state_poll_for_capability:{version:1},payment_state_payment_requires_confirmation:{version:1},payment_state_payment_failed:{version:1},payment_state_success:{version:1},payment_state_timed_out:{version:1},"onboarding.pubsec_system_use.started":{version:1},"onboarding.phone_verification.start":{version:1},"onboarding.phone_verification.sent_code":{version:1},"onboarding.phone_verification.invalid_code":{version:1},"onboarding.phone_verification.verified_code":{version:1},"onboarding.age_verification.start":{version:1},"onboarding.age_verification.complete":{version:1},"onboarding.name_input.started":{version:1},"onboarding.name_input.finished":{version:1},"onboarding.acceptable_use.started":{version:1},"onboarding.acceptable_use.finished":{version:1},"onboarding.disclaimers.started":{version:1},"onboarding.disclaimers.finished":{version:1},"onboarding.started":{version:1},"onboarding.completed":{version:1},"extended_onboarding.started":{version:1},"extended_onboarding.disclaimer.completed":{version:1},"extended_onboarding.name_input.completed":{version:1},"extended_onboarding.work_function.completed":{version:1},"extended_onboarding.drive_integration.started":{version:1},"extended_onboarding.drive_integration.skipped":{version:1},"extended_onboarding.drive_integration.completed":{version:1},"extended_onboarding.gmail_integration.started":{version:1},"extended_onboarding.gmail_integration.skipped":{version:1},"extended_onboarding.gmail_integration.completed":{version:1},"extended_onboarding.gcal_integration.started":{version:1},"extended_onboarding.gcal_integration.skipped":{version:1},"extended_onboarding.gcal_integration.completed":{version:1},"extended_onboarding.all_integrations.skipped":{version:1},"extended_onboarding.all_integrations.completed":{version:1},"extended_onboarding.topics.completed":{version:1},"extended_onboarding.example_prompts.completed":{version:1},"extended_onboarding.completed":{version:1},"extended_onboarding.hear_about.completed":{version:1},"extended_onboarding.hear_about.source_selected":{version:1},"extended_onboarding.hear_about.skipped":{version:1},"pro_subscription.upgraded_to_annual":{version:1},"pro_subscription.upgraded_to_max":{version:1},"max_subscription.downgraded_to_max":{version:1},"max_subscription.downgraded_to_pro":{version:1},"chat.conversation.first_conversation_created":{version:1},"chat.conversation.token_limit_exceeded":{version:1},"chat.conversation.token_limit_will_exceed":{version:1},"chat.conversation.too_long_prompt:loaded":{version:1},"chat.conversation.too_long_prompt:accepted":{version:1},"chat.conversation.too_long_prompt:dismissed":{version:1},"chat.conversation.too_long_prompt_warning:loaded":{version:1},"chat.conversation.too_long_prompt_warning:accepted":{version:1},"chat.conversation.too_long_prompt_warning:dismissed":{version:1},"chat.share.button.clicked":{version:1},"chat.share.modal.share_button.clicked":{version:1},"chat.share.modal.unshare_button.clicked":{version:1},"chat.share.open_link.clicked":{version:1},"chat.share.copy_link.clicked":{version:1},"ts.eu_election_banner.shown":{version:1,data_team_tag:"ts"},"ts.banner.shown":{version:1,data_team_tag:"ts"},"billing.credit_card.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.completed":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire_manual.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.completed":{version:1,data_team_tag:"billing_funnel"},"console.feedback.opened":{version:1},"console.feedback.submitted":{version:1},"evals.revision.created":{version:1},"evals.show_prompt_preview.toggled":{version:1},"evals.show_golden_answers.toggled":{version:1},"evals.run_all.submitted":{version:1},"evals.run_all.stopped":{version:1},"evals.test_case.run.submitted":{version:1},"evals.test_case.run.completed":{version:1},"evals.test_case.run.failed":{version:1},"evals.test_case.create.submitted":{version:1},"evals.test_case.delete.submitted":{version:1},"evals.select_revision.clicked":{version:1},"evals.test_case.update_rating.submitted":{version:1},"evals.test_case.import.show_modal.clicked":{version:1},"evals.test_case.import.browse.clicked":{version:1},"evals.test_case.import.success":{version:1},"evals.comparison.add_button.clicked":{version:1},"evals.comparison.remove_button.clicked":{version:1},"evals.comparison.other_revision.selected":{version:1},"test_case_generator.generate.started":{version:1},"test_case_generator.edit_logic.clicked":{version:1},"metaprompter.modal.loaded":{version:2},"metaprompter.example.selected":{version:1},"metaprompter.generate.started":{version:1},"metaprompter.generate.stop.attempted":{version:1},"metaprompter.generate.finished":{version:1},"metaprompter.start_editing.clicked":{version:1},"onboarding.invite_accept_page.invite_accept.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.invite_reject.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.submitted":{version:1,data_team_tag:"onboarding_funnel"},"workbench.prompt.new":{version:1},"workbench.completion.started":{version:2},"workbench.completion.finished":{version:2},"workbench.completion_stream.started":{version:1},"workbench.completion_stream.finished":{version:1},"workbench.tab_selection.clicked":{version:1},"workbench.variables_pane.loaded":{version:1},"workbench.examples.pane.loaded":{version:1},"workbench.examples.example.added":{version:2},"workbench.examples.example.deleted":{version:1},"workbench.examples.converted_to_raw_text":{version:1},"workbench.code_modal.opened":{version:1},"workbench.code_modal.code_copied":{version:1},"claudeai.projects.list_view.switched":{version:1},"claudeai.artifacts.execution.error":{version:1},"claudeai.conversation.suggestion.applied":{version:1},"claudeai.conversation.recent.opened":{version:1},"claudeai.projects.activity.shared_conversation.opened":{version:1},"claudeai.projects.project_starter.clicked":{version:1},"claudeai.projects.chat_starter.clicked":{version:1},"claudeai.conversation.artifact.vscode_exported":{version:1},"claudeai.settings.preview_feature.toggled":{version:1},"claudeai.settings.preview_feature.opened":{version:1},"claudeai.support.opened":{version:1},"claudeai.get_help.clicked":{version:1},"claudeai.conversation.feedback.sent":{version:1},"claudeai.conversation.setting.toggled":{version:1},"claudeai.thinking_cell.clicked":{version:1},"ccos.chatsuggestion.clicked":{version:1},"ccos.chatsuggestions.loaded":{version:1},"ccos.chatsuggestions.feedback":{version:1},"styles.selector.clicked":{version:1},"styles.modal":{version:1},"styles.nux.create_clicked":{version:1},"styles.custom.create_clicked":{version:1},"styles.custom.describe_clicked":{version:1},"styles.custom.describe_selected":{version:1},"styles.selected":{version:1},"artifact.feedback.sentiment":{version:1},"artifact.feedback.note":{version:1},"artifact.share_button_clicked":{version:1},"artifact.publish_button_clicked":{version:1},"artifact.share.modal.share_button_clicked":{version:1},"artifact.publish.modal.publish_button_clicked":{version:1},"artifact.studio.create_button_clicked":{version:1},"artifact.studio.create_mode_selected":{version:1},"artifact.studio.remix":{version:1},"artifact.studio.view_full_chat":{version:1},"artifact.studio.copy_prompt":{version:1},"artifact.popover.artifacts_tab_clicked":{version:1},"artifact.popover.dismiss_button_clicked":{version:1},"artifact.popover.dismiss_x_clicked":{version:1},"artifact.interaction.click":{version:1},"artifact.callout.learn_more_clicked":{version:1},"artifact.callout.enable_clicked":{version:1},"artifact.callout.dismissed":{version:1},"artifact.public.remix":{version:1},"artifact.public.share":{version:1},"mcp.servers.listed":{version:1},"mcp.servers.connected":{version:1},"mcp.resources.listed":{version:1},"mcp.resources.read":{version:1},"mcp.prompts.listed":{version:1},"mcp.prompts.used":{version:1},"mcp.tools.listed":{version:1},"mcp.tools.called":{version:1},"mcp.sampling.requested":{version:1},"mcp.websocket.transport.connected":{version:1},"mcp.websocket.authfailure":{version:1},"mcp.websocket.transport.reconnected":{version:1},"harmony.file.saved":{version:1},"harmony.suggestion.accepted":{version:1},"harmony.suggestion.rejected":{version:1},"hfi.comparative_model.selected":{version:1},"hfi.comparative_model.selection_cleared":{version:1},"hfi.comparative_model.streaming.started":{version:1},"hfi.comparative_model.streaming.finished":{version:1},"hfi.comparative_model.feedback_bar.switch_response.clicked":{version:1},"hfi.comparative_model.feedback_bar.prefer_response.clicked":{version:1},"apps.download_button_clicked":{version:1},"apps.nudge_banner_shown":{version:1},"apps.nudge_banner_clicked":{version:1},"apps.harmony_directory_synced":{version:1},"console.onboarding.name_and_legal.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.name_and_legal.submitted":{version:1,data_team_tag:"onboarding_funnel"},"tengu.waitlist.update":{version:1},"tengu.waitlist.details":{version:1},"oauth.authorize.approved":{version:1},"oauth.authorize.denied":{version:1},"oauth.authorize.success":{version:1},"oauth.authorize.failure":{version:1},"console.onboarding.account_type.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.account_type.individual_selected":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.account_type.organization_selected":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.organization_details.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.organization_details.submitted":{version:1,data_team_tag:"onboarding_funnel"},"console.navigation.nav_item.clicked":{version:1},"login.account.created":{version:1},"login.email.sending_magic_link":{version:1},"login.email.magic_link_sent":{version:1},"login.email.magic_link_send_error":{version:1},"login.email.verifying_magic_link":{version:1},"login.email.magic_link_success":{version:1},"login.email.magic_link_verification_error":{version:1},"login.email.sso_initiated":{version:1},"login.email.sso_success":{version:1},"login.email.sso_verifying_callback":{version:1},"login.email.sso_verification_error":{version:1},"login.email.verifying_code":{version:1},"login.email.code_verification_error":{version:1},"login.email.finished":{version:1},"login.google.started":{version:1},"login.google.error":{version:1},"login.google.verifying":{version:1},"login.google.verification_error":{version:1},"login.google.finished":{version:1},"landing.section.features.viewed":{version:1},"landing.section.pricing.viewed":{version:1},"spotlight.shown":{version:1},"spotlight.dismissed":{version:1},"spotlight.action_clicked":{version:1},"claudeai.conversation.citation_clicked":{version:1},"claudeai.in_chat_upsell.connect_gdrive.start":{version:1},"claudeai.in_chat_upsell.dismiss":{version:1},"claudeai.cardamom_prompts.category_displayed":{version:1},"claudeai.cardamom_prompts.prompt_displayed":{version:1},"claudeai.cardamom_prompts.prompt_used":{version:1},"artifactinlinefeedback.selection.clicked":{version:1},"claudeai.toast.shown":{version:1},"claudeai.toast.dismissed":{version:1},"claudeai.toast.cta_clicked":{version:1},"claudeai.invite_contest.clicked":{version:1},"claudeai.invite_contest.dismissed":{version:1},"claudeai.notification.permission.request_started":{version:1},"claudeai.notification.permission.result":{version:1}},b=()=>{var e;return{userAgent:null===(e=window.navigator)||void 0===e?void 0:e.userAgent,fbc:v.U.get(o.cn.FBCLID),gclid:v.U.get(o.cn.GOOGLE_GCL_AW)}};function h(e,n){let i={...b()};if((null==e?void 0:e.email_address)&&(i.email=e.email_address),e){var t,o;i.account_created_at=Date.parse(e.created_at),i.account_uuid=e.uuid;let a=n||(null===(o=e.memberships)||void 0===o?void 0:null===(t=o[0])||void 0===t?void 0:t.organization);if(a){i.organization_uuid=a.uuid,i.billing_type=a.billing_type;let e=(0,r.Nb)(a),n=(0,r.qD)(a);i.org_type=e,i.subscription_plan="claude_max"===e&&n?"".concat(e," ").concat(n):e}}return i}let k=()=>{let{account:e,activeOrganization:n}=(0,g.t)();return(0,l.useMemo)(()=>h(e,n),[e,n])},y=()=>{let{analytics:e}=(0,m.K)(),n=(0,p.T)(),{preferences:i}=(0,_.C)(),{value:t}=(0,a.FL)("log_segment_events"),o=(0,c.$)(),{account:r,activeOrganization:s,isLoading:d}=(0,g.t)(),v=(0,u.Zx)(),b=null==r?void 0:r.uuid,k=null==s?void 0:s.uuid,y=null==s?void 0:s.billing_type,w=(0,l.useCallback)(n=>{let t=!n&&!r;return!d&&e&&o&&(!t||i.analytics)},[d,e,o,r,i.analytics]),x=(0,l.useCallback)(e=>h(null!=e?e:r,s),[r,s]),S=(0,l.useCallback)(async(i,o)=>{var r;let{event_key:a,...s}=i,l={account_uuid:null!==(r=null==o?void 0:o.uuid)&&void 0!==r?r:b,organization_uuid:k,billing_type:y,surface:v?"claude-ai":"console",...f[a],...s},c={context:{traits:x(o)}};t&&console.log("[Segment Event] track: ".concat(a),l,c),w(o)&&(await (null==e?void 0:e.track(a,l,c)),null==n||n.track(a,l,c))},[e,n,b,k,y,v,t,w,x]),C=(0,l.useCallback)(async(i,o)=>{t&&console.log("[Segment Event] identify: ".concat(i),o),w()&&(await (null==e?void 0:e.identify(i,o)),null==n||n.identify(i,o))},[e,n,w,t]),z=(0,l.useCallback)(async(n,i)=>{t&&console.log("[Segment Event] alias: ".concat(i," -> ").concat(n)),w()&&await (null==e?void 0:e.alias(n,i))},[e,w,t]),E=(0,l.useCallback)(async(n,i)=>{var o,a,s;t&&console.log("[Segment Event] page_view: ".concat(n),i),w()&&(null!==(a=null===(o=await (null==e?void 0:e.user()))||void 0===o?void 0:o.id())&&void 0!==a?a:void 0)===(null!==(s=null==r?void 0:r.uuid)&&void 0!==s?s:void 0)&&await (null==e?void 0:e.page(n,i))},[e,w,r,t]);return(0,l.useMemo)(()=>({track:S,identify:C,page:E,alias:z,getTraitsWithContext:x}),[S,C,E,z,x])},w=(e,n,i,o)=>{let r=y(),{onSuccess:a,onError:s,...l}=o||{};return(0,d.uC)(n,i,{onSuccess(){for(var n=arguments.length,i=Array(n),t=0;t<n;t++)i[t]=arguments[t];r.track({event_key:e,result:"success"}),null==a||a(...i)},onError(n){let i;for(var o=arguments.length,a=Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];n instanceof t.Hx&&(i=n.type),r.track({event_key:e,result:"failure",failure_reason:i}),null==s||s(n,...a)},...l})},x=e=>{var n;let{eventKey:i,threshold:t=.5,freezeOnceVisible:o=!0}=e,{track:r}=y(),a=(0,l.useRef)(!1),{ref:c,entry:d}=(0,s.s)({threshold:t}),u=null!==(n=null==d?void 0:d.isIntersecting)&&void 0!==n&&n;return(0,l.useEffect)(()=>{!u||o&&a.current||(r({event_key:i}),a.current=!0)},[u,r,i,o]),c}},50862:function(e,n,i){i.d(n,{ConsentProvider:function(){return g},C:function(){return m}});var t=i(27573),o=i(45144),r=i(7653),a=i(60705),s=i(94872),l=i(53500),c=i(6385),d=i(35919),u=i.n(d),_=i(95407);let v=(0,r.createContext)({showConsentBanner:!1,openConsentBanner:u(),preferences:_.iw,savePreferences:u()}),g=e=>{let{children:n,requiresExplicitConsent:i}=e,[d,u,g]=function(e,n){let i=(0,a.f)(),[t,s]=(0,r.useState)(()=>!!i.get(e)),[l,c]=(0,r.useState)(()=>{try{let t=i.get(e);return t?JSON.parse(t):n}catch(i){return(0,o.Tb)(i,{extra:{message:"Malformed JSON cookie",cookieKey:e}}),n}});return[l,(0,r.useCallback)(n=>{i.set(e,JSON.stringify(n)),c(n),s(!0)},[i,e]),t]}(c.cn.CONSENT_PREFERENCES,i?_.iw:_.DF),[m,p]=(0,r.useState)(i&&!g),f=(0,r.useCallback)(e=>{u(e),(0,s.HF)(e),p(!1),l.u.updateCategories(e)},[u,p]);return(0,t.jsx)(v.Provider,{value:{showConsentBanner:m,openConsentBanner:()=>p(!0),preferences:d,savePreferences:f},children:n})};function m(){return(0,r.useContext)(v)}},27895:function(e,n,i){i.d(n,{ErrorsProvider:function(){return b},e:function(){return h},v:function(){return w}});var t=i(27573),o=i(35228),r=i(87033),a=i(97975),s=i.n(a),l=i(55854),c=i.n(l),d=i(78646),u=i.n(d),_=i(81695),v=i(7653),g=i(41270),m=i(27218),p=i(18013);let f=(0,v.createContext)(void 0);function b(e){let{children:n}=e,i=(0,v.useRef)(1),[o,r]=(0,v.useState)([]),a=(0,v.useCallback)(e=>{r(n=>n.filter(n=>n.id!==e))},[]),s=(0,v.useCallback)((e,n)=>{let t=i.current++;return r(n=>[...n,{id:t,message:e instanceof Error?e.message:e,toastType:"error"}]),n&&setTimeout(()=>a(t),n),t},[a]),l=(0,v.useCallback)((e,n)=>{let t=i.current++;return r(n=>[...n,{id:t,message:e,toastType:"success"}]),n&&setTimeout(()=>a(t),n),t},[a]),c=(0,v.useMemo)(()=>({toasts:o,addError:s,addSuccess:l,clearToast:a}),[o,s,l,a]);return(0,t.jsx)(f.Provider,{value:c,children:n})}function h(){let e=(0,v.useContext)(f);if(!e)throw Error("Must be called within ErrorsProvider");return e}let k=g.z.object({id:g.z.string().optional().nullable(),title:g.z.string().optional().nullable(),message:g.z.string().optional().nullable(),displayFrequencyHours:g.z.number().optional().nullable()}),y={};function w(){var e;let{id:n,title:i,message:t,displayFrequencyHours:a}=(0,r.xQ)("claude_system_message",y,k),{account:l}=(0,m.t)(),d=null!==(e=null==l?void 0:l.uuid)&&void 0!==e?e:"logged-out",g=(0,_.usePathname)(),[f,b]=(0,p.R)("dismissed-system-messages",{}),h=(0,v.useMemo)(()=>()=>b(e=>{let i=s()(e);return n&&u()(i,[d,n],Date.now()),i}),[b,d,n]);return(0,v.useMemo)(()=>{if(!l||(0,o.cG)(l,!0)||"/download"===g||!n)return!1;let e=c()(f,[d,n]);return!e||"boolean"==typeof e||!!a&&Date.now()-e>=36e5*a},[l,n,d,f,a,g])?{currentSystemMessageId:n,currentSystemMessageTitle:i,currentSystemMessageContent:t,dismissCurrentSystemMessage:h}:{currentSystemMessageId:null,currentSystemMessageTitle:null,currentSystemMessageContent:null,dismissCurrentSystemMessage:()=>null}}},94872:function(e,n,i){i.d(n,{HF:function(){return r},bq:function(){return o}});var t=i(45144);let o=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];try{"function"==typeof window.gtag&&gtag(e,...i)}catch(e){(0,t.Tb)(e)}},r=e=>{o("consent","update",a(e))},a=e=>({ad_personalization:e.marketing?"granted":"denied",ad_user_data:e.marketing?"granted":"denied",ad_storage:e.marketing?"granted":"denied",analytics_storage:e.analytics?"granted":"denied",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"})},91447:function(e,n,i){i.d(n,{K:function(){return s}});var t=i(8571),o=i(87033),r=i(7653),a=i(53500);let s=()=>{let{segmentKey:e,segmentCdnHost:n,segmentApiHost:i}=(0,t.mX)(),{value:s}=(0,o.FL)("requires_explicit_consent"),l=(0,r.useCallback)(()=>{a.u.reset()},[]);return{analytics:a.u.loadIfNecessary({segmentKey:e,segmentCdnHost:n,segmentApiHost:i,requiresExplicitConsent:s}),reset:l}}},25304:function(e,n,i){i.d(n,{IsolatedSegmentProvider:function(){return _},T:function(){return v}});var t=i(27573),o=i(80573),r=i(8571),a=i(87033),s=i(44053),l=i(7653);let c=["onboarding.started","extended_onboarding.started","onboarding.completed","chat.conversation.first_conversation_created","payment_state_success"],d={"onboarding.started":"Started Onboarding","extended_onboarding.started":"Started Onboarding","onboarding.completed":"CompleteRegistration","chat.conversation.first_conversation_created":"NewConversation",payment_state_success:"Purchase"},u=(0,l.createContext)(null);function _(e){let{children:n}=e,{segmentKey:i,segmentCdnHost:_}=(0,r.mX)(),v=(0,l.useRef)(null),[g,m]=(0,l.useState)(!1),p=(0,l.useRef)([]),{value:f}=(0,a.FL)("log_segment_events"),b=f&&!0,h=(0,o.$)(),k=(0,l.useCallback)(function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),t=1;t<n;t++)i[t-1]=arguments[t];b&&console.debug("[IsolatedSegmentProvider]",e,...i)},[b]),y=(0,l.useCallback)(()=>{let e=[...p.current];p.current=[],e.forEach(e=>{var n,i;k("Sending message to iframe:",e,p.current),null===(i=v.current)||void 0===i||null===(n=i.contentWindow)||void 0===n||n.postMessage({target:"isolated-segment",...e},"*")})},[k]),w=(0,l.useCallback)(e=>{var n;p.current.push(e),(null===(n=v.current)||void 0===n?void 0:n.contentWindow)&&(g||"init"===e.type)?y():k("iframe not ready, queueing message:",e)},[k,g,y]);(0,s.s)("message",(0,l.useCallback)(e=>{let n=e.data;if("isolated-segment"===n.source)switch(k("Received message from iframe:",n),n.type){case"iframe_ready":k("Iframe ready, initializing Segment with writeKey:",i,"cdnHost:",_),w({type:"init",writeKey:i,cdnHost:_});break;case"segment_initialized":k("Segment in iframe initialized successfully"),m(!0),k("messageQueue when IsolatedSegment is ready",p.current),y(),p.current=[];break;default:k("Message from isolated-segment iframe:",n.type)}},[_,i,k,w,m,y]));let x=(0,l.useCallback)((e,n,i)=>{if(k("Tracking event:",e,n,i),c.includes(e)){let t=d[e]||e;k("Sending event to Facebook Pixel:",e,t,n),w({type:"track",event:t,properties:n,options:i})}},[k,w]),S=(0,l.useCallback)((e,n)=>{k("Identifying user:",e,n),w({type:"identify",userId:e,traits:n})},[k,w]),C=(0,l.useCallback)(()=>{k("Sending ping..."),w({type:"ping"})},[k,w]),z=(0,l.useMemo)(()=>({isReady:g,track:x,identify:S,sendPing:C}),[g,x,S,C]);return(0,t.jsxs)(u.Provider,{value:z,children:[n,h&&(0,t.jsx)("iframe",{ref:v,src:"/isolated-segment.html",style:{display:"none"},referrerPolicy:"no-referrer",sandbox:"allow-scripts allow-same-origin",title:""})]})}function v(){return(0,l.useContext)(u)}},18013:function(e,n,i){i.d(n,{A:function(){return r},R:function(){return a}});var t=i(83981),o=i(14418);function r(e,n){return(0,t.X)({key:"SSS-".concat(e),defaultValue:n,serialize:JSON.stringify,deserialize:e=>void 0===e?n:JSON.parse(e)})}function a(e,n){return(0,o.I)({key:"LSS-".concat(e),defaultValue:n,serialize:JSON.stringify,deserialize:e=>void 0===e?n:JSON.parse(e),getInitialValueInEffect:!1,sync:!0})}},9788:function(e,n,i){i.d(n,{q:function(){return a}});var t=i(10607),o=i(7653);function r(e){return function(n){for(var i=arguments.length,r=Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];let s=n.map(e=>e.replace(/\n/g,"").trim()),l=o.forwardRef((n,i)=>{let{className:a,...l}=n,c=r.map(e=>"function"==typeof e?e(n):e),d=Object.fromEntries(Object.entries(l).filter(e=>{let[n]=e;return!n.startsWith("$")}));return o.createElement(e,{...d,ref:i,className:(0,t.Z)(s,c,"string"==typeof a?a:"")})});return l.displayName="string"==typeof e?e:e.displayName,l}}function a(e){return r(e)}a.a=r("a"),a.aside=r("aside"),a.button=r("button"),a.main=r("main"),a.div=r("div"),a.form=r("form"),a.nav=r("nav"),a.fieldset=r("fieldset"),a.header=r("header"),a.h1=r("h1"),a.h2=r("h2"),a.h3=r("h3"),a.h4=r("h4"),a.h5=r("h5"),a.th=r("th"),a.td=r("td"),a.input=r("input"),a.label=r("label"),a.p=r("p"),a.section=r("section"),a.span=r("span"),a.li=r("li")},35228:function(e,n,i){i.d(n,{D_:function(){return a},IC:function(){return s},c6:function(){return o},cG:function(){return l},kK:function(){return r},wJ:function(){return t}});let t=e=>{let{account:n,isClaudeDot:i}=e;return i?!1===n.settings.has_finished_claudeai_onboarding:!n.full_name||!n.display_name},o=(e,n)=>n&&!e.is_verified,r=(e,n)=>!!function(e,n){for(let i of e.invites)if(i.organization.capabilities&&i.organization.capabilities.includes(n))return i}(e,n?"raven":"api"),a=(e,n)=>!n&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,s=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i&&n&&!e.age_is_verified},l=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t({account:e,isClaudeDot:n})||o(e,n)||r(e,n)||a(e,n)||s(e,n,i)}},29305:function(e,n,i){i.d(n,{KS:function(){return r},vV:function(){return o}});let t=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$/,o=e=>t.test(e),r=(e,n)=>{if(!n)return!1;let i=e.split("@")[1];return n.includes(i)}},45439:function(e,n,i){i.d(n,{BM:function(){return r},Nb:function(){return t},On:function(){return o},qD:function(){return a}});let t=e=>{let n=e.capabilities;if(n.includes("api")&&n.includes("chat"))return"unknown";if(n.includes("api"))return n.includes("api_individual")?"api_individual":"api_team";if(n.includes("chat")){if(n.includes("raven")){let n=e.raven_type;return n?"enterprise"===n?"claude_enterprise":"claude_team":"unknown"}return n.includes("claude_max")?"claude_max":n.includes("claude_pro")?"claude_pro":"claude_free"}return"unknown"},o=e=>"claude_pro"===e||"claude_max"===e,r=e=>"claude_team"===e||"claude_enterprise"===e,a=e=>"default_claude_max_5x"===e.rate_limit_tier?"5x":"default_claude_max_20x"===e.rate_limit_tier?"20x":void 0}}]);